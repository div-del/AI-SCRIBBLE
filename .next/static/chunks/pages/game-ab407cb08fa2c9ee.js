(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[203],{134:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/game",function(){return r(2229)}])},2229:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return GamePage}});var s=r(5893),a=r(7294),n=r(4529),l=r(1559);let o=(0,n.Ue)()((0,l.n)(e=>({gameStarted:!1,currentRound:0,currentDrawer:null,players:[],scoreboard:[],messages:[],drawCommands:[],timeLeft:120,wordHint:"",finalRankings:[],isRoundActive:!1,startGame:t=>e(e=>{e.gameStarted=!0,e.players=[{id:"human",name:t,isAI:!1},{id:"gpt4o",name:"GPT-4o",isAI:!0,modelId:"openai/gpt-4o"},{id:"claude",name:"Claude 3.5",isAI:!0,modelId:"anthropic/claude-3-5-sonnet"},{id:"gemini",name:"Gemini 2.0",isAI:!0,modelId:"google/gemini-2.0-flash"},{id:"mistral",name:"Mistral Large",isAI:!0,modelId:"mistral/large-2"},{id:"deepseek",name:"DeepSeek",isAI:!0,modelId:"deepseek/deepseek-chat"}],e.scoreboard=e.players.map((e,t)=>({playerId:e.id,name:e.name,currentPoints:0,rank:t+1}))}),submitGuess:t=>e(e=>{}),addDrawCommand:t=>e(e=>{e.drawCommands.push(t)}),addMessage:t=>e(e=>{e.messages.push(t)}),updateScoreboard:t=>e(e=>{e.scoreboard=t}),setTimeLeft:t=>e(e=>{e.timeLeft=t}),setWordHint:t=>e(e=>{e.wordHint=t}),setCurrentRound:t=>e(e=>{e.currentRound=t}),setCurrentDrawer:t=>e(e=>{e.currentDrawer=t}),setIsRoundActive:t=>e(e=>{e.isRoundActive=t}),endGame:t=>e(e=>{e.finalRankings=t,e.gameStarted=!1}),resetGame:()=>e(e=>{e.gameStarted=!1,e.currentRound=0,e.currentDrawer=null,e.players=[],e.scoreboard=[],e.messages=[],e.drawCommands=[],e.timeLeft=120,e.wordHint="",e.finalRankings=[],e.isRoundActive=!1})})));var d=r(7642);let useSocket=()=>{let[e,t]=(0,a.useState)(null),[r,s]=(0,a.useState)(!1),{startGame:n,submitGuess:l,addDrawCommand:i,addMessage:c,updateScoreboard:m,setTimeLeft:u,setWordHint:h,setCurrentRound:x,setCurrentDrawer:b,setIsRoundActive:p,endGame:f}=o();return(0,a.useEffect)(()=>{let e=(0,d.io)("http://localhost:3001");return e.on("connect",()=>{s(!0),console.log("Connected to backend")}),e.on("disconnect",()=>{s(!1),console.log("Disconnected from backend")}),e.on("round_start",e=>{x(e.round),b(e.drawer),u(e.timeLimit),h(e.wordHint),p(!0),o.getState().drawCommands=[]}),e.on("draw_command",e=>{i(e)}),e.on("guess_submitted",e=>{c({type:"guess",playerId:e.playerId,playerName:e.playerName,text:e.guess,timestamp:Date.now()})}),e.on("correct_guess",e=>{c({type:"correct",playerId:e.playerId,playerName:e.playerName,text:"Correct! +".concat(e.points," pts"),timestamp:Date.now()})}),e.on("scoreboard_update",e=>{m(e.scoreboard)}),e.on("round_end",e=>{p(!1),c({type:"system",playerId:"system",playerName:"System",text:"Round ".concat(e.round," ended. Word was: ").concat(e.word),timestamp:Date.now()})}),e.on("game_end",e=>{f(e.finalRankings)}),t(e),()=>{e.close()}},[]),{socket:e,isConnected:r,startGame:t=>{e&&(e.emit("start_game",{playerName:t}),n(t))},submitGuess:t=>{e&&(e.emit("submit_guess",{guess:t}),l(t))}}};var i=r(5379),c=r.n(i);function DrawingCanvas(e){let{commands:t}=e,r=(0,a.useRef)(null);return(0,a.useEffect)(()=>{if(!r.current)return;let e=r.current;e.innerHTML="",t.forEach((t,r)=>{let s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("d",t.data),s.setAttribute("stroke",t.color),s.setAttribute("stroke-width",t.strokeWidth.toString()),s.setAttribute("fill","none"),s.setAttribute("stroke-linecap","round"),s.setAttribute("stroke-linejoin","round"),s.style.strokeDasharray="1000",s.style.strokeDashoffset="1000",s.style.animation="drawPath ".concat(t.duration,"ms ease-in-out ").concat(100*r,"ms forwards"),e.appendChild(s)})},[t]),(0,s.jsxs)("div",{className:"jsx-6797ef6a17abd03f flex justify-center",children:[(0,s.jsxs)("div",{className:"jsx-6797ef6a17abd03f relative",children:[(0,s.jsx)("svg",{ref:r,width:"400",height:"400",viewBox:"0 0 400 400",className:"jsx-6797ef6a17abd03f border-4 border-white/30 rounded-2xl bg-gradient-to-br from-yellow-50 to-orange-50 shadow-2xl"}),(0,s.jsx)("div",{className:"jsx-6797ef6a17abd03f absolute inset-0 border-4 border-white/20 rounded-2xl pointer-events-none"})]}),(0,s.jsx)(c(),{id:"6797ef6a17abd03f",children:"@-webkit-keyframes drawPath{to{stroke-dashoffset:0}}@-moz-keyframes drawPath{to{stroke-dashoffset:0}}@-o-keyframes drawPath{to{stroke-dashoffset:0}}@keyframes drawPath{to{stroke-dashoffset:0}}"})]})}function GuessInput(e){let{onSubmit:t,isDisabled:r=!1}=e,[n,l]=(0,a.useState)(""),handleSubmit=()=>{let e=n.trim().toLowerCase();e&&!r&&(t(e),l(""))};return(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-white mb-3",children:"Your Guess"}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("input",{type:"text",value:n,onChange:e=>l(e.target.value),onKeyPress:e=>{"Enter"===e.key&&handleSubmit()},placeholder:"Type your guess...",disabled:r,className:"flex-1 px-4 py-3 bg-white/20 border border-white/30 rounded-xl text-white placeholder-purple-200 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent backdrop-blur-sm disabled:opacity-50"}),(0,s.jsx)("button",{onClick:handleSubmit,disabled:r||!n.trim(),className:"px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white font-semibold rounded-xl shadow-lg transform transition-all duration-200 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:"\uD83C\uDFAF Guess"})]})]})}function ChatFeed(e){let{messages:t}=e,r=(0,a.useRef)(null);return(0,a.useEffect)(()=>{r.current&&(r.current.scrollTop=r.current.scrollHeight)},[t]),(0,s.jsxs)("div",{className:"h-full flex flex-col",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[(0,s.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),"Chat"]}),(0,s.jsx)("div",{ref:r,className:"flex-1 overflow-y-auto space-y-3 pr-2",children:t.map((e,t)=>(0,s.jsx)("div",{className:"p-3 rounded-xl backdrop-blur-sm border ".concat("correct"===e.type?"bg-green-500/20 border-green-400/30 text-green-100":"system"===e.type?"bg-blue-500/20 border-blue-400/30 text-blue-100":"bg-white/10 border-white/20 text-white"),children:(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsxs)("span",{className:"font-semibold",children:[e.playerName,":"]})," ",e.text]})},t))})]})}function Scoreboard(e){let{entries:t,currentDrawerId:r}=e,a=[...t].sort((e,t)=>e.rank-t.rank);return(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[(0,s.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Leaderboard"]}),(0,s.jsx)("div",{className:"space-y-3",children:a.map(e=>(0,s.jsxs)("div",{className:"flex justify-between items-center p-3 rounded-xl backdrop-blur-sm border transition-all duration-200 ".concat(e.playerId===r?"bg-purple-500/30 border-purple-400/50 shadow-lg":"bg-white/10 border-white/20 hover:bg-white/15"),children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsxs)("span",{className:"text-sm font-bold mr-3 px-2 py-1 rounded-full ".concat(1===e.rank?"bg-yellow-500 text-black":2===e.rank?"bg-gray-400 text-black":3===e.rank?"bg-orange-600 text-white":"bg-white/20 text-white"),children:["#",e.rank]}),(0,s.jsx)("span",{className:"font-medium text-white",children:e.name}),e.playerId===r&&(0,s.jsx)("svg",{className:"w-4 h-4 ml-2 text-purple-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})]}),(0,s.jsxs)("span",{className:"text-white font-bold",children:[e.currentPoints," pts"]})]},e.playerId))})]})}function GameTimer(e){let{timeLeft:t}=e;return(0,s.jsx)("div",{className:"flex flex-col items-center",children:(0,s.jsxs)("div",{className:"relative w-32 h-32",children:[(0,s.jsxs)("svg",{className:"w-32 h-32 transform -rotate-90",viewBox:"0 0 36 36",children:[(0,s.jsx)("path",{d:"m18,2.0845 a 15.9155,15.9155 0 0,1 0,31.831 a 15.9155,15.9155 0 0,1 0,-31.831",fill:"none",stroke:"rgba(255,255,255,0.2)",strokeWidth:"2"}),(0,s.jsx)("path",{d:"m18,2.0845 a 15.9155,15.9155 0 0,1 0,31.831 a 15.9155,15.9155 0 0,1 0,-31.831",fill:"none",stroke:t>60?"bg-green-500":t>30?"bg-yellow-500":"bg-red-500",strokeWidth:"3",strokeDasharray:"".concat(t/120*100,", 100"),className:"transition-all duration-1000 ease-linear"})]}),(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-3xl font-bold text-white",children:t}),(0,s.jsx)("div",{className:"text-sm text-purple-200",children:"seconds"})]})})]})})}function RoundHeader(e){let{round:t,drawer:r,wordLength:a}=e;return(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"inline-flex items-center bg-white/10 backdrop-blur-sm border border-white/20 rounded-full px-6 py-2 mb-4",children:[(0,s.jsx)("svg",{className:"w-5 h-5 mr-2 text-purple-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),(0,s.jsxs)("span",{className:"text-white font-semibold",children:["Round ",t,"/6"]})]}),r&&(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold text-white mb-2",children:[r.name," is drawing..."]}),(0,s.jsx)("div",{className:"inline-block bg-white/20 backdrop-blur-sm border border-white/30 rounded-xl px-6 py-3",children:(0,s.jsx)("div",{className:"text-xl font-mono text-white tracking-wider",children:"_ ".repeat(a).trim()})})]})]})}let getRankEmoji=e=>{switch(e){case 1:return"\uD83E\uDD47";case 2:return"\uD83E\uDD48";case 3:return"\uD83E\uDD49";default:return"#".concat(e)}};function FinalRankingsModal(e){let{rankings:t,isOpen:r,onClose:a}=e;return r?(0,s.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg border border-white/20 rounded-3xl p-8 max-w-md w-full shadow-2xl",children:[(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full mx-auto mb-4 flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})})}),(0,s.jsx)("h2",{className:"text-3xl font-bold text-white mb-2",children:"\uD83C\uDFC6 Final Rankings"}),(0,s.jsx)("p",{className:"text-purple-200",children:"Game Complete!"})]}),(0,s.jsx)("div",{className:"space-y-3 mb-6",children:t.map(e=>(0,s.jsxs)("div",{className:"flex justify-between items-center p-4 rounded-xl backdrop-blur-sm border border-white/20 bg-white/5",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"text-2xl mr-3",children:getRankEmoji(e.rank)}),(0,s.jsx)("span",{className:"font-semibold text-white text-lg",children:e.name})]}),(0,s.jsxs)("span",{className:"text-white font-bold text-xl",children:[e.totalPoints," pts"]})]},e.playerId))}),(0,s.jsx)("button",{onClick:a,className:"w-full py-3 px-6 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-semibold rounded-xl shadow-lg transform transition-all duration-200 hover:scale-105",children:"\uD83C\uDFAE Play Again"})]})}):null}function GamePage(){let[e,t]=(0,a.useState)(""),{socket:r,isConnected:n,startGame:l,submitGuess:d}=useSocket(),{gameStarted:i,currentRound:c,currentDrawer:m,scoreboard:u,messages:h,drawCommands:x,timeLeft:b,wordHint:p,finalRankings:f,isRoundActive:w}=o();return i||0!==f.length?(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-4",children:[(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-2xl p-6 mb-4",children:[(0,s.jsx)(RoundHeader,{round:c,drawer:m,wordLength:p.split(" ").length}),(0,s.jsx)("div",{className:"flex justify-center mt-4",children:(0,s.jsx)(GameTimer,{timeLeft:b})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsx)("div",{className:"lg:col-span-2",children:(0,s.jsx)("div",{className:"bg-white/10 backdrop-blur-lg border border-white/20 rounded-2xl p-6 shadow-2xl",children:(0,s.jsx)(DrawingCanvas,{commands:x})})}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"bg-white/10 backdrop-blur-lg border border-white/20 rounded-2xl p-6 shadow-2xl",children:(0,s.jsx)(Scoreboard,{entries:u,currentDrawerId:null==m?void 0:m.id})}),(0,s.jsx)("div",{className:"bg-white/10 backdrop-blur-lg border border-white/20 rounded-2xl p-6 shadow-2xl h-80",children:(0,s.jsx)(ChatFeed,{messages:h})}),(0,s.jsx)("div",{className:"bg-white/10 backdrop-blur-lg border border-white/20 rounded-2xl p-6 shadow-2xl",children:(0,s.jsx)(GuessInput,{onSubmit:e=>{d(e)},isDisabled:!w||(null==m?void 0:m.isAI)===!1})})]})]})]}),(0,s.jsx)(FinalRankingsModal,{rankings:f,isOpen:f.length>0,onClose:()=>{o.getState().resetGame()}})]}):(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg border border-white/20 p-8 rounded-2xl shadow-2xl max-w-md w-full",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("div",{className:"w-20 h-20 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full mx-auto mb-4 flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),(0,s.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:"AI Scribble"}),(0,s.jsx)("p",{className:"text-purple-200",children:"Draw, Guess, Compete with AI!"})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"Your Name"}),(0,s.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Enter your name...",className:"w-full px-4 py-3 bg-white/20 border border-white/30 rounded-xl text-white placeholder-purple-200 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent backdrop-blur-sm"})]}),(0,s.jsx)("button",{onClick:()=>{e.trim()&&l(e.trim())},disabled:!e.trim()||!n,className:"w-full py-3 px-6 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-semibold rounded-xl shadow-lg transform transition-all duration-200 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:n?"\uD83C\uDFAE Start Game":"\uD83D\uDD04 Connecting..."})]})]})})}}},function(e){e.O(0,[142,774,888,179],function(){return e(e.s=134)}),_N_E=e.O()}]);